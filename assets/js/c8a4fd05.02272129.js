"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[2085],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),d=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},l=function(e){var t=d(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(r),f=a,m=u["".concat(c,".").concat(f)]||u[f]||p[f]||i;return r?n.createElement(m,o(o({ref:t},l),{},{components:r})):n.createElement(m,o({ref:t},l))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var d=2;d<i;d++)o[d]=r[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},1846:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=r(7462),a=(r(7294),r(3905));const i={},o="4. Checking Limit Order Status",s={unversionedId:"tutorials/submit-limit-orders-via-api/submitting-the-limit-order/checking-limit-order-status",id:"tutorials/submit-limit-orders-via-api/submitting-the-limit-order/checking-limit-order-status",title:"4. Checking Limit Order Status",description:"In order to follow if/when your order has been matched you can either subscribe to \u201cTrade\u201d events by the Settlement Contract:",source:"@site/docs/tutorials/submit-limit-orders-via-api/submitting-the-limit-order/4.-checking-limit-order-status.md",sourceDirName:"tutorials/submit-limit-orders-via-api/submitting-the-limit-order",slug:"/tutorials/submit-limit-orders-via-api/submitting-the-limit-order/checking-limit-order-status",permalink:"/docs/docs/tutorials/submit-limit-orders-via-api/submitting-the-limit-order/checking-limit-order-status",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/submit-limit-orders-via-api/submitting-the-limit-order/4.-checking-limit-order-status.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"3. Placing the Limit Order",permalink:"/docs/docs/tutorials/submit-limit-orders-via-api/submitting-the-limit-order/placing-the-limit-order"}},c={},d=[],l={toc:d},u="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"4-checking-limit-order-status"},"4. Checking Limit Order Status"),(0,a.kt)("p",null,"In order to follow if/when your order has been matched you can either subscribe to \u201cTrade\u201d events by the",(0,a.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0x3328f5f2cEcAF00a2443082B657CedEAf70bfAEf"}," Settlement Contract"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import GPv2SettlementArtefact from "@gnosis.pm/gp-v2-contracts/deployments/mainnet/GPv2Settlement.json";\nimport { Contract, ethers } from "ethers";\nconst uid = <uid to follow>;\nconst TRADE_TIMEOUT_SECONDS = 30*60\nconst settlement = new Contract(\u201c0x9008D19f58AAbD9eD0D60971565AA8510560ab41\u201d, GPv2SettlementArtefact.abi, ethers.provider)\nconst traded = new Promise((resolve: (value: boolean) => void) => {\nethers.provider.on(settlement.filters.Trade(trader), (log) => {\n// Hacky way to verify that the UID is part of the event data\nif (log.data.includes(uid.substring(2))) {\nresolve(true);\n}\n});\n});\nconst timeout = new Promise((resolve: (value: boolean) => void) => {\nsetTimeout(resolve, TRADE_TIMEOUT_SECONDS*1000, false);\n});\nconst hasTraded = await Promise.race([traded, timeout]);\nThis script waits up to 30 minutes to find a trade event before eventually timing out.\nOr you can query our API using the order ID that you generated earlier\nhttps://api.cow.fi/mainnet/api/v1/trades?orderUid=0xc21b7756caf1f6df13e9947767204620371ca791a4b91db8620f04905d25b608e0b3700e0aadcb18ed8d4bff648bc99896a18ad160ef0bca\n[\n{\n"blockNumber": 12826021,\n"logIndex": 31,\n"orderUid": "0xc21b7756caf1f6df13e9947767204620371ca791a4b91db8620f04905d25b608e0b3700e0aadcb18ed8d4bff648bc99896a18ad160ef0bca",\n"buyAmount": "80623566",\n"sellAmount": "100000000000000000000",\n"sellAmountBeforeFees": "89287648398497935360",\n"owner": "0xe0b3700e0aadcb18ed8d4bff648bc99896a18ad1",\n"buyToken": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",\n"sellToken": "0x1a5f9352af8af974bfc03399e3767df6370d82e4",\n"txHash": "0xbcdd49946b56564b7ba7403ab63a2316ece5c6e12657782ffda620d192e591a0"\n}\n]\n')),(0,a.kt)("p",null,"If your order was partially fillable and traded in multiple chunks you may find one entry per trade.\\"),(0,a.kt)("p",null,"For convenience, you can also check the status of your order using the CoW Protocol API at ",(0,a.kt)("a",{parentName:"p",href:"https://api.cow.fi/$network/api/v1/orders/$orderUid"},"https://api.cow.fi/$network/api/v1/orders/$orderUid"),". For example: ",(0,a.kt)("a",{parentName:"p",href:"https://api.cow.fi/mainnet/api/v1/orders/0x1792f3fc1615117bef538ab7e830e4c882f9b51d27aadcc14dd10754bb6b5423baaea72417f4dc3e0f52a1783b0913d0f3516634632b58b1"},"https://api.cow.fi/mainnet/api/v1/orders/0x1792f3fc1615117bef538ab7e830e4c882f9b51d27aadcc14dd10754bb6b5423baaea72417f4dc3e0f52a1783b0913d0f3516634632b58b1"),"\\"),(0,a.kt)("p",null,"This is it. We hope you have been able to follow this tutorial end to end and made a successful trade. If you have any questions or are planning to write some utility software (e.g. signing logic in another language) please reach out to us on",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/cowswap"}," Discord"),", we are always happy to help."),(0,a.kt)("p",null,"Happy Trading!"),(0,a.kt)("p",null,"\\"))}p.isMDXComponent=!0}}]);