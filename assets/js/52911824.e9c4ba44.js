"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[6880],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>p});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},h="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=l(n),u=i,p=h["".concat(c,".").concat(u)]||h[u]||f[u]||r;return n?o.createElement(p,a(a({ref:t},d),{},{components:n})):o.createElement(p,a({ref:t},d))}));function p(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[h]="string"==typeof e?e:i,a[1]=s;for(var l=2;l<r;l++)a[l]=n[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5708:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>f,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=n(7462),i=(n(7294),n(3905));const r={},a="Coincidence of Wants",s={unversionedId:"overview/coincidence-of-wants",id:"overview/coincidence-of-wants",title:"Coincidence of Wants",description:"CoW Protocol, because of its use of Batch Auctions, is optimized for finding Coincidence of Wants (CoWs) amongst the trades within a batch, as well as ring trades. But what exactly are Coincidence of Wants and ring trades?",source:"@site/docs/overview/coincidence-of-wants.md",sourceDirName:"overview",slug:"/overview/coincidence-of-wants",permalink:"/docs/docs/overview/coincidence-of-wants",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/overview/coincidence-of-wants.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Batch Auctions",permalink:"/docs/docs/overview/batch-auctions"},next:{title:"CoW Hooks",permalink:"/docs/docs/overview/cow-hooks/"}},c={},l=[],d={toc:l},h="wrapper";function f(e){let{components:t,...n}=e;return(0,i.kt)(h,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"coincidence-of-wants"},"Coincidence of Wants"),(0,i.kt)("p",null,"CoW Protocol, because of its use of Batch Auctions, is optimized for finding Coincidence of Wants (CoWs) amongst the trades within a batch, as well as ring trades. But what exactly are Coincidence of Wants and ring trades?"),(0,i.kt)("p",null,'Coincidence of wants can be explained as "economic phenomenon where two parties each hold an item the other wants, and therefore exchange these items directly. This means that on CoW Protocol, when two trades or more, each hold an asset that the other wants, their orders can be settled directly between all of them without the need for an external market maker or liquidity provider. CoW Protocol can create CoWs in a two dimensional orderbook, but can also create them on a multi-dimensional orderbook.'),(0,i.kt)("figure",null,(0,i.kt)("img",{src:"../img/Simple CoW.png",alt:""}),(0,i.kt)("figcaption",null)),(0,i.kt)("p",null,"One of the advantages of using batch auctions is that not only can you find perfect Coincidence of Wants matching, but you can also create ring trades. Essentially, a ring trade shares liquidity across all orders, rather than a single token pair. This functionality allows the protocol to offer traders better prices as they do not need to wait to have the perfect match between trades since they can dissect the trades into pieces to improve the outcome of them. Ring trades are one of the solutions to work around the fragmented liquidity."),(0,i.kt)("p",null,"Once we know the theory behind Coincidence of Wants, and Ring trades, let's deep dive in an ",(0,i.kt)("a",{parentName:"p",href:"https://explorer.cow.fi/tx/0x71d6f5bb2f29d16a0649d2b6a2eb3fabde8040598c21e675511d54e27399f6d2?tab=graph%5C&vis=trades"},"example")," for both of them to understand them deeper."),(0,i.kt)("figure",null,(0,i.kt)("img",{src:"../img/image (12).png",alt:""}),(0,i.kt)("figcaption",null)),(0,i.kt)("figure",null,(0,i.kt)("img",{src:"../img/image (13).png",alt:""}),(0,i.kt)("figcaption",null)),(0,i.kt)("p",null,"In this batch auction, CoW Protocol found a Coincidence of Wants, from multiple users' orders. In this CoW, what we can see is that 12 swaps were mixed together to share liquidity amongst all of them. This allowed the protocol to settle a portion of the trade size internally, via CoWs, while only needing to tap into two different on-chain AMMs to cover for the rest of the liquidity within the batch."),(0,i.kt)("p",null,"Ring trades are a form of Coincidence of Wants that not only maximize the liquidity on a two dimensional orderbook, but instead maximize on a multidimensional level, meaning that the Coincidence of wants can be found in minimum three different tokens. Because of it, the protocol is able to match different trading token pairs in the same batch auction, to avoid having to interact with multiple AMM pools. One important aspect to understand the slight difference between CoWs and ring trades is that every ring trade is a CoW, but not every CoW is a ring trade. An example of a ring trade would be the following:"),(0,i.kt)("figure",null,(0,i.kt)("img",{src:"../img/Ring CoW.png",alt:""}),(0,i.kt)("figcaption",null)),(0,i.kt)("p",null,"Eli wants to trade his ETH for DAI. He sends his ETH to Edith, who gives her USDT to Lily who gives her COW to Chow, and finally, Chow gives his DAI to Eli. In this way, Eli\u2019s trade is filled by going through a three-party Coincidence of Wants ring trade. This logic holds for the other three participants as well:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Edith gets her ETH from Eli, even though she has no DAI (the asset he really wants) to give him in return"," "),(0,i.kt)("li",{parentName:"ol"},"Lily trades COW for USDT using Chow, Eli, and Edit as proxies"),(0,i.kt)("li",{parentName:"ol"},"Chow does the same thing for his DAI to COW trade")),(0,i.kt)("p",null,"Overall, by leveraging Batch Auctions which are tailored for Coincidence of Wants, CoW Protocol is able to give better prices for trades because batching transactions results in a lower spread, as well as a much more optimized transaction management for the user."))}f.isMDXComponent=!0}}]);